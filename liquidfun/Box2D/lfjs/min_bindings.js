var Offsets={b2Body:{type:0,islandIndex:8,xf:12,xf0:28,sweep:44,linearVelocity:80,angularVelocity:88,force:92,torque:100,world:104,prev:108,next:112,fixtureList:116,fixtureCount:120,jointList:124,contactList:128,mass:132,invMass:136,I:140,invI:144,linearDamping:148,angularDamping:152,gravityScale:156,sleepTime:160,userData:164},b2Contact:{flags:4,prev:8,next:12,nodeA:16,nodeB:32,fixtureA:48,fixtureB:52,indexA:56,indexB:60,manifold:64,toiCount:128,toi:132,friction:136,restitution:140,tangentSpeed:144},
b2Fixture:{density:0,next:4,body:8,shape:12,friction:16,restitution:20,proxies:24,proxyCount:28,filter:32,filterCategoryBits:32,filterMaskBits:34,filterGroupIndex:36,isSensor:38,userData:40},b2ParticleGroup:{system:0,firstIndex:4,lastIndex:8,groupFlags:12,strength:16,prev:20,next:24,timestamp:28,mass:32,inertia:36,center:40,linearVelocity:48,angularVelocity:56,transform:60,userData:76},b2WorldManifold:{normal:0,points:8,separations:24},b2World:{bodyList:102960},b2XformWeldJoint:{transformB:116}};var FLT_EPSILON=1.1920929E-7;function b2Max(a,b){return new b2Vec2(Math.max(a.x,b.x),Math.max(a.y,b.y))}function b2Min(a,b){return new b2Vec2(Math.min(a.x,b.x),Math.min(a.y,b.y))}function b2Clamp(a,b,c){return b2Max(b,b2Min(a,c))}function b2Vec2(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.x=a;this.y=b}b2Vec2.Add=function(a,b,c){a.x=b.x+c.x;a.y=b.y+c.y};b2Vec2.CrossScalar=function(a,b,c){a.x=-c*b.y;a.y=c*b.x};b2Vec2.Cross=function(a,b){return a.x*b.y-a.y*b.x};
b2Vec2.MulScalar=function(a,b,c){a.x=b.x*c;a.y=b.y*c};b2Vec2.Mul=function(a,b,c){var d=b.p,e=b.q.c;b=b.q.s;var f=c.x;c=c.y;a.x=e*f-b*c+d.x;a.y=b*f+e*c+d.y};b2Vec2.Normalize=function(a,b){var c=b.Length();c<FLT_EPSILON?(a.x=0,a.y=0):(c=1/c,a.x=b.x*c,a.y=b.y*c)};b2Vec2.Sub=function(a,b,c){a.x=b.x-c.x;a.y=b.y-c.y};b2Vec2.prototype.Clone=function(){return new b2Vec2(this.x,this.y)};b2Vec2.prototype.Set=function(a,b){this.x=a;this.y=b};
b2Vec2.prototype.Length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)};b2Vec2.prototype.LengthSquared=function(){var a=this.x,b=this.y;return a*a+b*b};function b2Rot(a){void 0===a&&(a=0);this.s=Math.sin(a);this.c=Math.cos(a)}b2Rot.prototype.Set=function(a){this.s=Math.sin(a);this.c=Math.cos(a)};b2Rot.prototype.SetIdentity=function(){this.s=0;this.c=1};b2Rot.prototype.GetXAxis=function(){return new b2Vec2(this.c,this.s)};
function b2Transform(a,b){void 0===a&&(a=new b2Vec2);void 0===b&&(b=new b2Rot);this.p=a;this.q=b}b2Transform.prototype.FromFloat64Array=function(a){var b=this.p,c=this.q;b.x=a[0];b.y=a[1];c.s=a[2];c.c=a[3]};b2Transform.prototype.SetIdentity=function(){this.p.Set(0,0);this.q.SetIdentity()};
function b2Mat33(a,b,c,d,e,f,g,h,k){Array.isArray(a)&&(k=a[8],h=a[7],g=a[6],f=a[5],e=a[4],d=a[3],c=a[2],b=a[1],a=a[0]);void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===g&&(g=0);void 0===h&&(h=0);void 0===k&&(k=0);this.a=a;this.b=b;this.c=c;this.d=d;this.e=e;this.f=f;this.g=g;this.h=h;this.i=k}b2Mat33.Identity=function(){return new b2Mat33(1,0,0,0,1,0,0,0,1)};
b2Mat33.Translate=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return new b2Mat33(1,0,0,0,1,0,a,b,1)};b2Mat33.Rotate=function(a){void 0===a&&(a=0);return new b2Mat33(Math.cos(a),-Math.sin(a),0,Math.sin(a),Math.cos(a),0,0,0,1)};b2Mat33.Scale=function(a,b){void 0===a&&(a=1);void 0===b&&(b=a);return new b2Mat33(a,0,0,0,b,0,0,0,1)};
b2Mat33.Multiply=function(a,b){return b.hasOwnProperty("x")?new b2Vec2(a.a*b.x+a.d*b.y+a.g,a.b*b.x+a.e*b.y+a.h):new b2Mat33(a.a*b.a+a.d*b.b+a.g*b.c,a.b*b.a+a.e*b.b+a.h*b.c,a.c*b.a+a.f*b.b+a.i*b.c,a.a*b.d+a.d*b.e+a.g*b.f,a.b*b.d+a.e*b.e+a.h*b.f,a.c*b.d+a.f*b.e+a.i*b.f,a.a*b.g+a.d*b.h+a.g*b.i,a.b*b.g+a.e*b.h+a.h*b.i,a.c*b.g+a.f*b.h+a.i*b.i)};b2Mat33.Multiply22=function(a,b){return new b2Vec2(a.a*b.x+a.d*b.y,a.b*b.x+a.e*b.y)};
b2Mat33.Inverse=function(a){var b=a.e*a.i-a.h*a.f,c=-(a.b*a.i-a.h*a.c),d=a.b*a.f-a.e*a.c,e=a.a*b+a.d*c+a.g*d;0!=e&&(e=1/e);return new b2Mat33(e*b,e*c,e*d,e*-(a.d*a.i-a.g*a.f),e*(a.a*a.i-a.g*a.c),e*-(a.a*a.f-a.d*a.c),e*(a.d*a.h-a.g*a.e),e*-(a.a*a.h-a.g*a.b),e*(a.a*a.e-a.d*a.b))};b2Mat33.prototype.Multiply=function(a){return b2Mat33.Multiply(this,a)};b2Mat33.prototype.Multiply22=function(a){return b2Mat33.Multiply22(this,a)};
b2Mat33.prototype.Translate=function(a,b){return b2Mat33.Multiply(b2Mat33.Translate(a,b),this)};b2Mat33.prototype.Rotate=function(a){return b2Mat33.Multiply(b2Mat33.Rotate(a),this)};b2Mat33.prototype.Scale=function(a,b){return b2Mat33.Multiply(b2Mat33.Scale(a,b),this)};b2Mat33.prototype.Inverse=function(){return b2Mat33.Inverse(this)};
b2Mat33.prototype.toString=function(){return"\u23a1"+this.a+","+this.d+","+this.g+"\u23a4\n\u23a2"+this.b+","+this.e+","+this.h+"\u23a5\n\u23a3"+this.c+","+this.f+","+this.i+"\u23a6"};function b2AABB(){this.lowerBound=new b2Vec2;this.upperBound=new b2Vec2}b2AABB.prototype.GetCenter=function(){var a=new b2Vec2;b2Vec2.Add(a,this.lowerBound,this.upperBound);b2Vec2.MulScalar(a,a,.5);return a};var b2Manifold_GetPointCount=Module.cwrap("b2Manifold_GetPointCount","number",["number"]);function b2Manifold(a){this.ptr=a}b2Manifold.prototype.GetPointCount=function(){return b2Manifold_GetPointCount(this.ptr)};var b2WorldManifold_points_offset=Offsets.b2WorldManifold.points;
function b2WorldManifold(a){this.buffer=new DataView(Module.HEAPU8.buffer,a);this.ptr=a}b2WorldManifold.prototype.GetPoint=function(a){var b=new b2Vec2;b.x=this.buffer.getFloat32(8*a+b2WorldManifold_points_offset,!0);b.y=this.buffer.getFloat32(8*a+4+b2WorldManifold_points_offset,!0);return b};var b2EdgeShape_CreateFixture=Module.cwrap("b2EdgeShape_CreateFixture","number","number number number number number number number number number number number number number number number number".split(" "));function b2EdgeShape(){this.hasVertex3=this.hasVertex0=!1;this.vertex0=new b2Vec2;this.vertex1=new b2Vec2;this.vertex2=new b2Vec2;this.vertex3=new b2Vec2;this.type=b2Shape_Type_e_edge}b2EdgeShape.prototype.Set=function(a,b){this.vertex1=a;this.vertex2=b;this.hasVertex3=this.hasVertex0=!1};
b2EdgeShape.prototype._CreateFixture=function(a,b){return b2EdgeShape_CreateFixture(a.ptr,b.density,b.friction,b.isSensor,b.restitution,b.userData,b.filter.categoryBits,b.filter.groupIndex,b.filter.maskBits,this.hasVertex0,this.hasVertex3,this.vertex0.x,this.vertex0.y,this.vertex1.x,this.vertex1.y,this.vertex2.x,this.vertex2.y,this.vertex3.x,this.vertex3.y)};var b2PolygonShape_CreateFixture_3=Module.cwrap("b2PolygonShape_CreateFixture_3","number","number number number number number number number number number number number number".split(" ")),b2PolygonShape_CreateFixture_4=Module.cwrap("b2PolygonShape_CreateFixture_4","number","number number number number number number number number number number number number number number".split(" ")),b2PolygonShape_CreateFixture_5=Module.cwrap("b2PolygonShape_CreateFixture_5","number","number number number number number number number number number number number number number number number number".split(" ")),
b2PolygonShape_CreateFixture_6=Module.cwrap("b2PolygonShape_CreateFixture_6","number","number number number number number number number number number number number number number number number number number number".split(" ")),b2PolygonShape_CreateFixture_7=Module.cwrap("b2PolygonShape_CreateFixture_7","number","number number number number number number number number number number number number number number number number number number number number".split(" ")),b2PolygonShape_CreateFixture_8=Module.cwrap("b2PolygonShape_CreateFixture_8",
"number","number number number number number number number number number number number number number number number number number number number number number number".split(" ")),b2PolygonShape_CreateParticleGroup_4=Module.cwrap("b2PolygonShape_CreateParticleGroup_4","number","number number number number number number number number number number number number number number number number number number number number number number number number number number number number".split(" ")),b2PolygonShape_DestroyParticlesInShape_4=
Module.cwrap("b2PolygonShape_DestroyParticlesInShape_4","number","number number number number number number number number number number number number number".split(" "));function b2PolygonShape(){this.position=new b2Vec2;this.vertices=[];this.type=b2Shape_Type_e_polygon}b2PolygonShape.prototype.SetAsBoxXY=function(a,b){this.vertices[0]=new b2Vec2(-a,-b);this.vertices[1]=new b2Vec2(a,-b);this.vertices[2]=new b2Vec2(a,b);this.vertices[3]=new b2Vec2(-a,b)};
b2PolygonShape.prototype.SetAsBoxXYCenterAngle=function(a,b,c,d){this.vertices[0]=new b2Vec2(-a,-b);this.vertices[1]=new b2Vec2(a,-b);this.vertices[2]=new b2Vec2(a,b);this.vertices[3]=new b2Vec2(-a,b);a=new b2Transform;a.p=c;a.q.Set(d);for(c=0;4>c;c++)b2Vec2.Mul(this.vertices[c],a,this.vertices[c])};
b2PolygonShape.prototype._CreateFixture=function(a,b){var c=this.vertices;switch(c.length){case 3:var d=c[0],e=c[1],f=c[2];return b2PolygonShape_CreateFixture_3(a.ptr,b.density,b.friction,b.isSensor,b.restitution,b.userData,b.filter.categoryBits,b.filter.groupIndex,b.filter.maskBits,d.x,d.y,e.x,e.y,f.x,f.y);case 4:var d=c[0],e=c[1],f=c[2],g=c[3];return b2PolygonShape_CreateFixture_4(a.ptr,b.density,b.friction,b.isSensor,b.restitution,b.userData,b.filter.categoryBits,b.filter.groupIndex,b.filter.maskBits,
d.x,d.y,e.x,e.y,f.x,f.y,g.x,g.y);case 5:var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4];return b2PolygonShape_CreateFixture_5(a.ptr,b.density,b.friction,b.isSensor,b.restitution,b.userData,b.filter.categoryBits,b.filter.groupIndex,b.filter.maskBits,d.x,d.y,e.x,e.y,f.x,f.y,g.x,g.y,h.x,h.y);case 6:var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5];return b2PolygonShape_CreateFixture_6(a.ptr,b.density,b.friction,b.isSensor,b.restitution,b.userData,b.filter.categoryBits,b.filter.groupIndex,b.filter.maskBits,d.x,d.y,
e.x,e.y,f.x,f.y,g.x,g.y,h.x,h.y,k.x,k.y);case 7:var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],l=c[6];return b2PolygonShape_CreateFixture_7(a.ptr,b.density,b.friction,b.isSensor,b.restitution,b.userData,b.filter.categoryBits,b.filter.groupIndex,b.filter.maskBits,d.x,d.y,e.x,e.y,f.x,f.y,g.x,g.y,h.x,h.y,k.x,k.y,l.x,l.y);case 8:return d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],l=c[6],c=c[7],b2PolygonShape_CreateFixture_8(a.ptr,b.density,b.friction,b.isSensor,b.restitution,b.userData,b.filter.categoryBits,
b.filter.groupIndex,b.filter.maskBits,d.x,d.y,e.x,e.y,f.x,f.y,g.x,g.y,h.x,h.y,k.x,k.y,l.x,l.y,c.x,c.y)}};
b2PolygonShape.prototype._CreateParticleGroup=function(a,b){var c=this.vertices;switch(c.length){case 4:return b2PolygonShape_CreateParticleGroup_4(a.ptr,b.angle,b.angularVelocity,b.color.r,b.color.g,b.color.b,b.color.a,b.flags,b.group.ptr,b.groupFlags,b.lifetime,b.linearVelocity.x,b.linearVelocity.y,b.position.x,b.position.y,b.positionData,b.particleCount,b.strength,b.stride,b.userData,c[0].x,c[0].y,c[1].x,c[1].y,c[2].x,c[2].y,c[3].x,c[3].y)}};
b2PolygonShape.prototype._DestroyParticlesInShape=function(a,b){var c=this.vertices;switch(c.length){case 4:return b2PolygonShape_DestroyParticlesInShape_4(a.ptr,c[0].x,c[0].y,c[1].x,c[1].y,c[2].x,c[2].y,c[3].x,c[3].y,b.p.x,b.p.y,b.q.s,b.q.c)}};
b2PolygonShape.prototype.Validate=function(){for(var a=0,b=this.vertices.length;a<b;++a){var c=a,d=a<b-1?c+1:0,e=this.vertices[c],f=this.vertices[d],g=new b2Vec2;b2Vec2.Sub(g,f,e);for(f=0;f<b;++f)if(f!=c&&f!=d){var h=new b2Vec2;b2Vec2.Sub(h,this.vertices[f],e);if(0>b2Vec2.Cross(g,h))return!1}}return!0};var b2Shape_Type_e_circle=0,b2Shape_Type_e_edge=1,b2Shape_Type_e_polygon=2,b2Shape_Type_e_chain=3,b2Shape_Type_e_typeCount=4,b2_linearSlop=.005,b2_polygonRadius=2*b2_linearSlop,b2_maxPolygonVertices=8;function b2MassData(a,b,c){this.mass=a;this.center=b;this.I=c};var b2ChainShape_CreateFixture=Module.cwrap("b2ChainShape_CreateFixture","number","number number number number number number number number number number".split(" "));function b2ChainShape(){this.radius=b2_polygonRadius;this.vertices=[];this.type=b2Shape_Type_e_chain;this.nextVertex=this.prevVertex=null}b2ChainShape.prototype.CreateLoop=function(){this.vertices.push(this.vertices[0]);this.prevVertex=this.vertices[this.vertices.length-2];this.nextVertex=this.vertices[1]};
b2ChainShape.prototype._CreateFixture=function(a,b){var c=this.vertices,d=c.length,e=2*d;this.prevVertex&&(e+=2);this.nextVertex&&(e+=2);for(var e=new Float32Array(e),f=0,g=0;g<d;f+=2,g++)e[f]=c[g].x,e[f+1]=c[g].y;this.prevVertex&&(e[2*d]=this.prevVertex.x,e[2*d+1]=this.prevVertex.y,d++);this.nextVertex&&(e[2*d]=this.nextVertex.x,e[2*d+1]=this.nextVertex.y);c=e.length*e.BYTES_PER_ELEMENT;d=Module._malloc(c);c=new Uint8Array(Module.HEAPU8.buffer,d,c);c.set(new Uint8Array(e.buffer));e=b2ChainShape_CreateFixture(a.ptr,
b.density,b.friction,b.isSensor,b.restitution,b.userData,b.filter.categoryBits,b.filter.groupIndex,b.filter.maskBits,c.byteOffset,e.length,!!this.prevVertex,!!this.nextVertex);Module._free(c.byteOffset);return e};var b2CircleShape_CreateFixture=Module.cwrap("b2CircleShape_CreateFixture","number","number number number number number number number number number".split(" ")),b2CircleShape_CreateParticleGroup=Module.cwrap("b2CircleShape_CreateParticleGroup","number","number number number number number number number number number number number number number number number number number number number number number number number".split(" ")),b2CircleShape_DestroyParticlesInShape=Module.cwrap("b2CircleShape_DestroyParticlesInShape",
"number","number number number number number number number number".split(" "));function b2CircleShape(){this.position=new b2Vec2;this.radius=0;this.type=b2Shape_Type_e_circle}b2CircleShape.prototype._CreateFixture=function(a,b){return b2CircleShape_CreateFixture(a.ptr,b.density,b.friction,b.isSensor,b.restitution,b.userData,b.filter.categoryBits,b.filter.groupIndex,b.filter.maskBits,this.position.x,this.position.y,this.radius)};
b2CircleShape.prototype._CreateParticleGroup=function(a,b){return b2CircleShape_CreateParticleGroup(a.ptr,b.angle,b.angularVelocity,b.color.r,b.color.g,b.color.b,b.color.a,b.flags,b.group.ptr,b.groupFlags,b.lifetime,b.linearVelocity.x,b.linearVelocity.y,b.position.x,b.position.y,b.positionData,b.particleCount,b.strength,b.stride,b.userData,this.position.x,this.position.y,this.radius)};
b2CircleShape.prototype._DestroyParticlesInShape=function(a,b){return b2CircleShape_DestroyParticlesInShape(a.ptr,this.position.x,this.position.y,this.radius,b.p.x,b.p.y,b.q.s,b.q.c)};var b2Body_ApplyAngularImpulse=Module.cwrap("b2Body_ApplyAngularImpulse","null",["number","number","number"]),b2Body_ApplyLinearImpulse=Module.cwrap("b2Body_ApplyLinearImpulse","null","number number number number number number".split(" ")),b2Body_ApplyForce=Module.cwrap("b2Body_ApplyForce","number","number number number number number number".split(" ")),b2Body_ApplyForceToCenter=Module.cwrap("b2Body_ApplyForceToCenter","number",["number","number","number","number"]),b2Body_ApplyTorque=Module.cwrap("b2Body_ApplyTorque",
"number",["number","number","number"]),b2Body_DestroyFixture=Module.cwrap("b2Body_DestroyFixture","null",["number","number"]),b2Body_GetAngle=Module.cwrap("b2Body_GetAngle","number",["number"]),b2Body_GetAngularVelocity=Module.cwrap("b2Body_GetAngularVelocity","number",["number"]),b2Body_GetInertia=Module.cwrap("b2Body_GetInertia","number",["number"]),b2Body_GetLinearVelocity=Module.cwrap("b2Body_GetLinearVelocity","null",["number","number"]),b2Body_GetLocalPoint=Module.cwrap("b2Body_GetLocalPoint",
"null",["number","number","number","number"]),b2Body_GetLocalVector=Module.cwrap("b2Body_GetLocalVector","null",["number","number","number","number"]),b2Body_GetMass=Module.cwrap("b2Body_GetMass","number",["number"]),b2Body_GetPosition=Module.cwrap("b2Body_GetPosition","null",["number","number"]),b2Body_GetTransform=Module.cwrap("b2Body_GetTransform","null",["number","number"]),b2Body_GetType=Module.cwrap("b2Body_GetType","number",["number"]),b2Body_GetWorldCenter=Module.cwrap("b2Body_GetWorldCenter",
"null",["number","number"]),b2Body_GetWorldPoint=Module.cwrap("b2Body_GetWorldPoint","null",["number","number","number","number"]),b2Body_GetWorldVector=Module.cwrap("b2Body_GetWorldVector","null",["number","number","number","number"]),b2Body_GetMassData=Module.cwrap("b2Body_GetMassData","null",["number","number"]),b2Body_SetAngularVelocity=Module.cwrap("b2Body_SetAngularVelocity","null",["number","number"]),b2Body_SetAwake=Module.cwrap("b2Body_SetAwake","number",["number","number"]),b2Body_SetFixedRotation=
Module.cwrap("b2Body_SetFixedRotation","number",["number","number"]),b2Body_SetLinearVelocity=Module.cwrap("b2Body_SetLinearVelocity","null",["number","number","number"]),b2Body_SetMassData=Module.cwrap("b2Body_SetMassData","null",["number","number","number","number","number"]),b2Body_SetTransform=Module.cwrap("b2Body_SetTransform","null",["number","number","number"]),b2Body_SetType=Module.cwrap("b2Body_SetType","null",["number","number"]),b2Body_SetBullet=Module.cwrap("b2Body_SetBullet","null",["number",
"number"]),b2Body_xf_offset=Offsets.b2Body.xf,b2Body_userData_offset=Offsets.b2Body.userData;function b2Body(a){this.buffer=new DataView(Module.HEAPU8.buffer,a);this.ptr=a;this.fixtures=[];this.world=null}b2Body.prototype.ApplyAngularImpulse=function(a,b){b2Body_ApplyAngularImpulse(this.ptr,a,b)};b2Body.prototype.ApplyLinearImpulse=function(a,b,c){b2Body_ApplyLinearImpulse(this.ptr,a.x,a.y,b.x,b.y,c)};b2Body.prototype.ApplyForce=function(a,b,c){b2Body_ApplyForce(this.ptr,a.x,a.y,b.x,b.y,c)};
b2Body.prototype.ApplyForceToCenter=function(a,b){b2Body_ApplyForceToCenter(this.ptr,a.x,a.y,b)};b2Body.prototype.ApplyTorque=function(a,b){b2Body_ApplyTorque(this.ptr,a,b)};b2Body.prototype.CreateFixtureFromDef=function(a){var b=new b2Fixture;b.FromFixtureDef(a);b._SetPtr(a.shape._CreateFixture(this,a));b.body=this;b2World._Push(b,this.fixtures);this.world.fixturesLookup[b.ptr]=b;b.SetFilterData(a.filter);return b};
b2Body.prototype.CreateFixtureFromShape=function(a,b){var c=new b2FixtureDef;c.shape=a;c.density=b;return this.CreateFixtureFromDef(c)};b2Body.prototype.DestroyFixture=function(a){b2Body_DestroyFixture(this.ptr,a.ptr);b2World._RemoveItem(a,this.fixtures)};b2Body.prototype.GetAngle=function(){return b2Body_GetAngle(this.ptr)};b2Body.prototype.GetAngularVelocity=function(){return b2Body_GetAngularVelocity(this.ptr)};b2Body.prototype.GetInertia=function(){return b2Body_GetInertia(this.ptr)};
b2Body.prototype.GetMass=function(){return b2Body_GetMass(this.ptr)};b2Body.prototype.GetLinearVelocity=function(){b2Body_GetLinearVelocity(this.ptr,_vec2Buf.byteOffset);var a=new Float32Array(_vec2Buf.buffer,_vec2Buf.byteOffset,_vec2Buf.length);return new b2Vec2(a[0],a[1])};b2Body.prototype.GetLocalPoint=function(a){b2Body_GetLocalPoint(this.ptr,a.x,a.y,_vec2Buf.byteOffset);a=new Float32Array(_vec2Buf.buffer,_vec2Buf.byteOffset,_vec2Buf.length);return new b2Vec2(a[0],a[1])};
b2Body.prototype.GetLocalVector=function(a){b2Body_GetLocalVector(this.ptr,a.x,a.y,_vec2Buf.byteOffset);a=new Float32Array(_vec2Buf.buffer,_vec2Buf.byteOffset,_vec2Buf.length);return new b2Vec2(a[0],a[1])};b2Body.prototype.GetPosition=function(){b2Body_GetPosition(this.ptr,_vec2Buf.byteOffset);var a=new Float32Array(_vec2Buf.buffer,_vec2Buf.byteOffset,_vec2Buf.length);return new b2Vec2(a[0],a[1])};
b2Body.prototype.GetTransform=function(){var a=new b2Transform;a.p.x=this.buffer.getFloat32(b2Body_xf_offset,!0);a.p.y=this.buffer.getFloat32(b2Body_xf_offset+4,!0);a.q.s=this.buffer.getFloat32(b2Body_xf_offset+8,!0);a.q.c=this.buffer.getFloat32(b2Body_xf_offset+12,!0);return a};b2Body.prototype.GetType=function(){return b2Body_GetType(this.ptr)};b2Body.prototype.GetUserData=function(){return this.buffer.getUint32(b2Body_userData_offset,!0)};b2Body.prototype.GetWorld=function(){return this.world};
b2Body.prototype.GetWorldCenter=function(){b2Body_GetWorldCenter(this.ptr,_vec2Buf.byteOffset);var a=new Float32Array(_vec2Buf.buffer,_vec2Buf.byteOffset,_vec2Buf.length);return new b2Vec2(a[0],a[1])};b2Body.prototype.GetWorldPoint=function(a){b2Body_GetWorldPoint(this.ptr,a.x,a.y,_vec2Buf.byteOffset);a=new Float32Array(_vec2Buf.buffer,_vec2Buf.byteOffset,_vec2Buf.length);return new b2Vec2(a[0],a[1])};
b2Body.prototype.GetWorldVector=function(a){b2Body_GetWorldVector(this.ptr,a.x,a.y,_vec2Buf.byteOffset);a=new Float32Array(_vec2Buf.buffer,_vec2Buf.byteOffset,_vec2Buf.length);return new b2Vec2(a[0],a[1])};b2Body.prototype.GetMassData=function(){b2Body_GetMassData(this.ptr,_transBuf.byteOffset);var a=new Float32Array(_transBuf.buffer,_transBuf.byteOffset,_transBuf.length);return{mass:a[0],center:new b2Vec2(a[1],a[2]),I:a[3]}};
b2Body.prototype.SetAngularVelocity=function(a){b2Body_SetAngularVelocity(this.ptr,a)};b2Body.prototype.SetAwake=function(a){b2Body_SetAwake(this.ptr,a)};b2Body.prototype.SetFixedRotation=function(a){b2Body_SetFixedRotation(this.ptr,a)};b2Body.prototype.SetLinearVelocity=function(a){b2Body_SetLinearVelocity(this.ptr,a.x,a.y)};b2Body.prototype.SetMassData=function(a){b2Body_SetMassData(this.ptr,a.mass,a.center.x,a.center.y,a.I)};
b2Body.prototype.SetTransform=function(a,b){b2Body_SetTransform(this.ptr,a.x,a.y,b)};b2Body.prototype.SetType=function(a){b2Body_SetType(this.ptr,a)};b2Body.prototype.SetBullet=function(a){b2Body_SetBullet(this.ptr,a);this.bullet=!!a};var b2_staticBody=0,b2_kinematicBody=1,b2_dynamicBody=2;
function b2BodyDef(){this.allowSleep=this.active=!0;this.angularDamping=this.angularVelocity=this.angle=0;this.awake=!0;this.fixedRotation=this.bullet=!1;this.gravityScale=1;this.linearDamping=0;this.linearVelocity=new b2Vec2;this.position=new b2Vec2;this.type=b2_staticBody;this.userData=null};b2World.BeginContactBody=function(a){void 0!==world.listener.BeginContactBody&&(a=new b2Contact(a),world.listener.BeginContactBody(a))};b2World.EndContactBody=function(a){void 0!==world.listener.EndContactBody&&(a=new b2Contact(a),world.listener.EndContactBody(a))};b2World.PreSolve=function(a,b){void 0!==world.listener.PreSolve&&world.listener.PreSolve(new b2Contact(a),new b2Manifold(b))};
b2World.PostSolve=function(a,b){void 0!==world.listener.PostSolve&&world.listener.PostSolve(new b2Contact(a),new b2ContactImpulse(b))};b2World.QueryAABB=function(a){return world.queryAABBCallback.ReportFixture(world.fixturesLookup[a])};b2World.RayCast=function(a,b,c,d,e,f){return world.rayCastCallback.ReportFixture(world.fixturesLookup[a],new b2Vec2(b,c),new b2Vec2(d,e),f)};
var b2World_Create=Module.cwrap("b2World_Create","number",["number","number"]),b2World_CreateBody=Module.cwrap("b2World_CreateBody","number","number number number number number number number number number number number number number number number number number".split(" ")),b2World_CreateParticleSystem=Module.cwrap("b2World_CreateParticleSystem","number","number number number number number number number number number number number number number number number number number number".split(" ")),b2World_DestroyBody=
Module.cwrap("b2World_DestroyBody","null",["number","number"]),b2World_DestroyJoint=Module.cwrap("b2World_DestroyJoint","null",["number","number"]),b2World_DestroyParticleSystem=Module.cwrap("b2World_DestroyParticleSystem","null",["number","number"]),b2World_QueryAABB=Module.cwrap("b2World_QueryAABB","null",["number","number","number","number","number"]),b2World_RayCast=Module.cwrap("b2World_RayCast","null",["number","number","number","number","number"]),b2World_SetContactListener=Module.cwrap("b2World_SetContactListener",
"null",["number"]),b2World_SetGravity=Module.cwrap("b2World_SetGravity","null",["number","number","number"]),b2World_Step=Module.cwrap("b2World_Step","null",["number","number","number"]),_transBuf=null,_vec2Buf=null;
function b2World(a){this.bodies=[];this.bodiesLookup={};this.fixturesLookup={};this.joints=[];this.listener=null;this.particleSystems=[];this.ptr=b2World_Create(a.x,a.y);this.rayCastCallback=this.queryAABBCallback=null;this.buffer=new DataView(Module.HEAPU8.buffer,this.ptr);a=4*Float32Array.BYTES_PER_ELEMENT;var b=Module._malloc(a);_transBuf=new Uint8Array(Module.HEAPU8.buffer,b,a);a=2*Float32Array.BYTES_PER_ELEMENT;b=Module._malloc(a);_vec2Buf=new Uint8Array(Module.HEAPU8.buffer,b,a)}
b2World._Push=function(a,b){a.lindex=b.length;b.push(a)};b2World._RemoveItem=function(a,b){var c=b.length,d=a.lindex;1<c&&(b[d]=b[c-1],b[d].lindex=d);b.pop()};
b2World.prototype.CreateBody=function(a){var b=new b2Body(b2World_CreateBody(this.ptr,a.active,a.allowSleep,a.angle,a.angularVelocity,a.angularDamping,a.awake,a.bullet,a.fixedRotation,a.gravityScale,a.linearDamping,a.linearVelocity.x,a.linearVelocity.y,a.position.x,a.position.y,a.type,a.userData));b2World._Push(b,this.bodies);b.world=this;b.userData=a.userData;return this.bodiesLookup[b.ptr]=b};b2World.prototype.CreateJoint=function(a){a=a.Create(this);b2World._Push(a,this.joints);return a};
b2World.prototype.CreateParticleSystem=function(a){var b=new b2ParticleSystem(b2World_CreateParticleSystem(this.ptr,a.colorMixingStrength,a.dampingStrength,a.destroyByAge,a.ejectionStrength,a.elasticStrength,a.lifetimeGranularity,a.powderStrength,a.pressureStrength,a.radius,a.repulsiveStrength,a.springStrength,a.staticPressureIterations,a.staticPressureRelaxation,a.staticPressureStrength,a.surfaceTensionNormalStrength,a.surfaceTensionPressureStrength,a.viscousStrength));b2World._Push(b,this.particleSystems);
b.dampingStrength=a.dampingStrength;b.radius=a.radius;return b};b2World.prototype.DestroyBody=function(a){b2World_DestroyBody(this.ptr,a.ptr);b2World._RemoveItem(a,this.bodies)};b2World.prototype.DestroyJoint=function(a){b2World_DestroyJoint(this.ptr,a.ptr);b2World._RemoveItem(a,this.joints)};b2World.prototype.DestroyParticleSystem=function(a){b2World_DestroyParticleSystem(this.ptr,a.ptr);b2World._RemoveItem(a,this.particleSystems)};
b2World.prototype.QueryAABB=function(a,b){this.queryAABBCallback=a;b2World_QueryAABB(this.ptr,b.lowerBound.x,b.lowerBound.y,b.upperBound.x,b.upperBound.y)};b2World.prototype.RayCast=function(a,b,c){this.rayCastCallback=a;b2World_RayCast(this.ptr,b.x,b.y,c.x,c.y)};b2World.prototype.SetContactListener=function(a){this.listener=a;b2World_SetContactListener(this.ptr)};b2World.prototype.SetGravity=function(a){b2World_SetGravity(this.ptr,a.x,a.y)};
b2World.prototype.Step=function(a,b,c){b2World_Step(this.ptr,a,b,c)};var b2WheelJoint_SetMotorSpeed=Module.cwrap("b2WheelJoint_SetMotorSpeed","null",["number","number"]),b2WheelJoint_SetSpringFrequencyHz=Module.cwrap("b2WheelJoint_SetSpringFrequencyHz","null",["number","number"]);function b2WheelJoint(a){this.ptr=this.next=null}b2WheelJoint.prototype.SetMotorSpeed=function(a){b2WheelJoint_SetMotorSpeed(this.ptr,a)};b2WheelJoint.prototype.SetSpringFrequencyHz=function(a){b2WheelJoint_SetSpringFrequencyHz(this.ptr,a)};
var b2WheelJointDef_Create=Module.cwrap("b2WheelJointDef_Create","number","number number number number number number number number number number number number number number number".split(" ")),b2WheelJointDef_InitializeAndCreate=Module.cwrap("b2WheelJointDef_InitializeAndCreate","number","number number number number number number number number number number number number number".split(" "));
function b2WheelJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!1;this.dampingRatio=.7;this.enableMotor=!1;this.frequencyHz=2;this.localAnchorA=new b2Vec2;this.localAnchorB=new b2Vec2;this.localAxisA=new b2Vec2(1,0);this.motorSpeed=this.maxMotorTorque=0}
b2WheelJointDef.prototype.Create=function(a){var b=new b2WheelJoint(this);b.ptr=b2WheelJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.dampingRatio,this.enableMotor,this.frequencyHz,this.localAnchorA.x,this.localAnchorA.y,this.localAnchorB.x,this.localAnchorB.y,this.localAxisA.x,this.localAxisA.y,this.maxMotorTorque,this.motorSpeed);return b};
b2WheelJointDef.prototype.InitializeAndCreate=function(a,b,c,d){this.bodyA=a;this.bodyB=b;a=new b2WheelJoint(this);a.ptr=b2WheelJointDef_InitializeAndCreate(world.ptr,this.bodyA.ptr,this.bodyB.ptr,c.x,c.y,d.x,d.y,this.collideConnected,this.dampingRatio,this.enableMotor,this.frequencyHz,this.maxMotorTorque,this.motorSpeed);b2World._Push(a,world.joints);return a};var b2WeldJointDef_Create=Module.cwrap("b2WeldJointDef_Create","number","number number number number number number number number number number".split(" ")),b2WeldJointDef_InitializeAndCreate=Module.cwrap("b2WeldJointDef_InitializeAndCreate","number","number number number number number number number number".split(" "));
function b2WeldJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!1;this.frequencyHz=this.dampingRatio=0;this.localAnchorA=new b2Vec2;this.localAnchorB=new b2Vec2;this.referenceAngle=0}b2WeldJointDef.prototype.Create=function(a){var b=new b2WeldJoint(this);b.ptr=b2WeldJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.dampingRatio,this.frequencyHz,this.localAnchorA.x,this.localAnchorA.y,this.localAnchorB.x,this.localAnchorB.y,this.referenceAngle);return b};
b2WeldJointDef.prototype.InitializeAndCreate=function(a,b,c){this.bodyA=a;this.bodyB=b;a=new b2WeldJoint(this);a.ptr=b2WeldJointDef_InitializeAndCreate(world.ptr,this.bodyA.ptr,this.bodyB.ptr,c.x,c.y,this.collideConnected,this.dampingRatio,this.frequencyHz);b2World._Push(a,world.joints);return a};function b2WeldJoint(a){this.bodyA=a.bodyA;this.bodyB=a.bodyB;this.ptr=this.next=null};var b2GearJoint_GetRatio=Module.cwrap("b2GearJoint_GetRatio","number",["number"]);function b2GearJoint(a){this.next=this.ptr=null}b2GearJoint.prototype.GetRatio=function(){return b2GearJoint_GetRatio(this.ptr)};var b2GearJointDef_Create=Module.cwrap("b2GearJointDef_Create","number","number number number number number number number".split(" "));function b2GearJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!1;this.joint2=this.joint1=null;this.ratio=0}
b2GearJointDef.prototype.Create=function(a){var b=new b2GearJoint(this);b.ptr=b2GearJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.joint1.ptr,this.joint2.ptr,this.ratio);return b};var e_unknownJoint=0,e_revoluteJoint=1,e_prismaticJoint=2,e_distanceJoint=3,e_pulleyJoint=4,e_mouseJoint=5,e_gearJoint=6,e_wheelJoint=7,e_weldJoint=8,e_frictionJoint=9,e_ropeJoint=10,e_motorJoint=11,e_xformWeldJoint=12,b2Joint_GetBodyA=Module.cwrap("b2Joint_GetBodyA","number",["number"]),b2Joint_GetBodyB=Module.cwrap("b2Joint_GetBodyB","number",["number"]);function b2Joint(){}b2Joint.prototype.GetBodyA=function(){return world.bodiesLookup[b2Joint_GetBodyA(this.ptr)]};b2Joint.prototype.GetBodyB=function(){return world.bodiesLookup[b2Joint_GetBodyB(this.ptr)]};var b2FrictionJointDef_Create=Module.cwrap("b2FrictionJointDef_Create","number","number number number number number number number number number number".split(" ")),b2FrictionJointDef_InitializeAndCreate=Module.cwrap("b2FrictionJointDef_InitializeAndCreate","number","number number number number number number number number".split(" "));
function b2FrictionJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!1;this.localAnchorA=new b2Vec2;this.localAnchorB=new b2Vec2;this.maxTorque=this.maxForce=0;this.userData=null}b2FrictionJointDef.prototype.Create=function(a){var b=new b2FrictionJoint(this);b.ptr=b2FrictionJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.localAnchorA.x,this.localAnchorA.y,this.localAnchorB.x,this.localAnchorB.y,this.maxForce,this.maxTorque);return b};
b2FrictionJointDef.prototype.InitializeAndCreate=function(a,b,c){this.bodyA=a;this.bodyB=b;a=new b2FrictionJoint(this);a.ptr=b2FrictionJointDef_InitializeAndCreate(world.ptr,this.bodyA.ptr,this.bodyB.ptr,c.x,c.y,this.collideConnected,this.maxForce,this.maxTorque);b2World._Push(a,world.joints);return a};function b2FrictionJoint(a){this.bodyA=a.bodyA;this.bodyB=a.bodyB;this.next=this.ptr=null};var b2RevoluteJoint_EnableLimit=Module.cwrap("b2RevoluteJoint_EnableLimit","number",["number","number"]),b2RevoluteJoint_EnableMotor=Module.cwrap("b2RevoluteJoint_EnableMotor","number",["number","number"]),b2RevoluteJoint_GetJointAngle=Module.cwrap("b2RevoluteJoint_GetJointAngle","number",["number"]),b2RevoluteJoint_IsLimitEnabled=Module.cwrap("b2RevoluteJoint_IsLimitEnabled","number",["number"]),b2RevoluteJoint_IsMotorEnabled=Module.cwrap("b2RevoluteJoint_IsMotorEnabled","number",["number"]),b2RevoluteJoint_SetMotorSpeed=
Module.cwrap("b2RevoluteJoint_SetMotorSpeed","number",["number","number"]);function b2RevoluteJoint(a){this.collideConnected=a.collideConnected;this.enableLimit=a.enableLimit;this.enableMotor=a.enableMotor;this.lowerAngle=a.lowerAngle;this.maxMotorTorque=a.maxMotorTorque;this.motorSpeed=a.motorSpeed;this.ptr=this.next=null;this.upperAngle=a.upperAngle;this.userData=a.userData}b2RevoluteJoint.prototype=new b2Joint;
b2RevoluteJoint.prototype.EnableLimit=function(a){b2RevoluteJoint_EnableLimit(this.ptr,a)};b2RevoluteJoint.prototype.EnableMotor=function(a){b2RevoluteJoint_EnableMotor(this.ptr,a)};b2RevoluteJoint.prototype.GetJointAngle=function(a){return b2RevoluteJoint_GetJointAngle(this.ptr)};b2RevoluteJoint.prototype.IsLimitEnabled=function(){return b2RevoluteJoint_IsLimitEnabled(this.ptr)};b2RevoluteJoint.prototype.IsMotorEnabled=function(){return b2RevoluteJoint_IsMotorEnabled(this.ptr)};
b2RevoluteJoint.prototype.SetMotorSpeed=function(a){b2RevoluteJoint_SetMotorSpeed(this.ptr,a);this.motorSpeed=a};var b2RevoluteJointDef_Create=Module.cwrap("b2RevoluteJointDef_Create","number","number number number number number number number number number number number number number number number".split(" ")),b2RevoluteJointDef_InitializeAndCreate=Module.cwrap("b2RevoluteJointDef_InitializeAndCreate","number","number number number number number number number number number number number number".split(" "));
function b2RevoluteJointDef(){this.enableMotor=this.enableLimit=this.collideConnected=!1;this.localAnchorA=new b2Vec2;this.localAnchorB=new b2Vec2;this.upperAngle=this.referenceAngle=this.motorSpeed=this.maxMotorTorque=this.lowerAngle=0;this.userData=null}
b2RevoluteJointDef.prototype.Create=function(a){var b=new b2RevoluteJoint(this);b.ptr=b2RevoluteJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.enableLimit,this.enableMotor,this.lowerAngle,this.localAnchorA.x,this.localAnchorA.y,this.localAnchorB.x,this.localAnchorB.y,this.maxMotorTorque,this.motorSpeed,this.referenceAngle,this.upperAngle);return b};
b2RevoluteJointDef.prototype.InitializeAndCreate=function(a,b,c){this.bodyA=a;this.bodyB=b;var d=new b2RevoluteJoint(this);d.ptr=b2RevoluteJointDef_InitializeAndCreate(world.ptr,a.ptr,b.ptr,c.x,c.y,this.collideConnected,this.enableLimit,this.enableMotor,this.lowerAngle,this.maxMotorTorque,this.motorSpeed,this.upperAngle);b2World._Push(d,world.joints);return d};var b2MotorJoint_SetAngularOffset=Module.cwrap("b2MotorJoint_SetAngularOffset","null",["number","number"]),b2MotorJoint_SetLinearOffset=Module.cwrap("b2MotorJoint_SetLinearOffset","null",["number","number","number"]);function b2MotorJoint(a){this.bodyA=a.bodyA;this.bodyB=a.bodyB;this.next=this.ptr=null}b2MotorJoint.prototype.SetAngularOffset=function(a){b2MotorJoint_SetAngularOffset(this.ptr,a)};b2MotorJoint.prototype.SetLinearOffset=function(a){b2MotorJoint_SetLinearOffset(this.ptr,a.x,a.y)};
var b2MotorJointDef_Create=Module.cwrap("b2MotorJointDef_Create","number","number number number number number number number number number number".split(" ")),b2MotorJointDef_InitializeAndCreate=Module.cwrap("b2MotorJointDef_InitializeAndCreate","number","number number number number number number number number".split(" "));
function b2MotorJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!1;this.angularOffset=0;this.correctionFactor=.3;this.linearOffset=new b2Vec2;this.maxTorque=this.maxForce=0}b2MotorJointDef.prototype.Create=function(a){var b=new b2MotorJoint(this);b.ptr=b2MotorJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.angularOffset,this.correctionFactor,this.linearOffset.x,this.linearOffset.y,this.maxForce,this.maxTorque);return b};
b2MotorJointDef.prototype.InitializeAndCreate=function(a,b){this.bodyA=a;this.bodyB=b;var c=new b2MotorJoint(this);c.ptr=b2MotorJointDef_InitializeAndCreate(world.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.correctionFactor,this.maxForce,this.maxTorque);b2World._Push(c,world.joints);return c};function b2PulleyJoint(a){this.next=this.ptr=null}var b2PulleyJointDef_Create=Module.cwrap("b2PulleyJointDef_Create","number","number number number number number number number number number number number number number number number".split(" ")),b2PulleyJointDef_InitializeAndCreate=Module.cwrap("b2PulleyJointDef_InitializeAndCreate","number","number number number number number number number number number number number number number number".split(" "));
function b2PulleyJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!0;this.groundAnchorA=new b2Vec2;this.groundAnchorB=new b2Vec2;this.localAnchorA=new b2Vec2;this.localAnchorB=new b2Vec2;this.lengthB=this.lengthA=0;this.ratio=1}
b2PulleyJointDef.prototype.Create=function(a){var b=new b2PulleyJoint(this);b.ptr=b2PulleyJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.groundAnchorA.x,this.groundAnchorA.y,this.groundAnchorB.x,this.groundAnchorB.y,this.lengthA,this.lengthB,this.localAnchorA.x,this.localAnchorA.y,this.localAnchorB.x,this.localAnchorB.y,this.ratio);return b};
b2PulleyJointDef.prototype.InitializeAndCreate=function(a,b,c,d,e,f,g){this.bodyA=a;this.bodyB=b;a=new b2PulleyJoint(this);a.ptr=b2PulleyJointDef_InitializeAndCreate(world.ptr,this.bodyA.ptr,this.bodyB.ptr,e.x,e.y,f.x,f.y,c.x,c.y,d.x,d.y,g,this.collideConnected);b2World._Push(a,world.joints);return a};function b2DistanceJoint(a){this.bodyA=a.bodyA;this.bodyB=a.bodyB;this.next=this.ptr=null}var b2DistanceJointDef_Create=Module.cwrap("b2DistanceJointDef_Create","number","number number number number number number number number number number number".split(" ")),b2DistanceJointDef_InitializeAndCreate=Module.cwrap("b2DistanceJointDef_InitializeAndCreate","number","number number number number number number number number number number".split(" "));
function b2DistanceJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!1;this.dampingRatio=0;this.length=1;this.localAnchorA=new b2Vec2;this.localAnchorB=new b2Vec2;this.frequencyHz=0}b2DistanceJointDef.prototype.Create=function(a){var b=new b2DistanceJoint(this);b.ptr=b2DistanceJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.dampingRatio,this.frequencyHz,this.length,this.localAnchorA.x,this.localAnchorA.y,this.localAnchorB.x,this.localAnchorB.y);return b};
b2DistanceJointDef.prototype.InitializeAndCreate=function(a,b,c,d){this.bodyA=a;this.bodyB=b;a=new b2DistanceJoint(this);a.ptr=b2DistanceJointDef_InitializeAndCreate(world.ptr,this.bodyA.ptr,this.bodyB.ptr,c.x,c.y,d.x,d.y,this.collideConnected,this.dampingRatio,this.frequencyHz);b2World._Push(a,world.joints);return a};var b2PrismaticJoint_EnableLimit=Module.cwrap("b2PrismaticJoint_EnableLimit","number",["number","number"]),b2PrismaticJoint_EnableMotor=Module.cwrap("b2PrismaticJoint_EnableMotor","number",["number","number"]),b2PrismaticJoint_GetJointTranslation=Module.cwrap("b2PrismaticJoint_GetJointTranslation","number",["number"]),b2PrismaticJoint_GetMotorSpeed=Module.cwrap("b2PrismaticJoint_GetMotorSpeed","number",["number"]),b2PrismaticJoint_GetMotorForce=Module.cwrap("b2PrismaticJoint_GetMotorForce","number",
["number","number"]),b2PrismaticJoint_IsLimitEnabled=Module.cwrap("b2PrismaticJoint_IsLimitEnabled","number",["number"]),b2PrismaticJoint_IsMotorEnabled=Module.cwrap("b2PrismaticJoint_IsMotorEnabled","number",["number"]),b2PrismaticJoint_SetMotorSpeed=Module.cwrap("b2PrismaticJoint_SetMotorSpeed","number",["number","number"]);function b2PrismaticJoint(a){this.next=this.ptr=null}b2PrismaticJoint.prototype=new b2Joint;
b2PrismaticJoint.prototype.EnableLimit=function(a){return b2PrismaticJoint_EnableLimit(this.ptr,a)};b2PrismaticJoint.prototype.EnableMotor=function(a){return b2PrismaticJoint_EnableMotor(this.ptr,a)};b2PrismaticJoint.prototype.GetJointTranslation=function(){return b2PrismaticJoint_GetJointTranslation(this.ptr)};b2PrismaticJoint.prototype.GetMotorSpeed=function(){return b2PrismaticJoint_GetMotorSpeed(this.ptr)};
b2PrismaticJoint.prototype.GetMotorForce=function(a){return b2PrismaticJoint_GetMotorForce(this.ptr,a)};b2PrismaticJoint.prototype.IsLimitEnabled=function(){return b2PrismaticJoint_IsLimitEnabled(this.ptr)};b2PrismaticJoint.prototype.IsMotorEnabled=function(){return b2PrismaticJoint_IsMotorEnabled(this.ptr)};b2PrismaticJoint.prototype.GetMotorEnabled=function(){return b2PrismaticJoint_IsMotorEnabled(this.ptr)};
b2PrismaticJoint.prototype.SetMotorSpeed=function(a){return b2PrismaticJoint_SetMotorSpeed(this.ptr,a)};var b2PrismaticJointDef_Create=Module.cwrap("b2PrismaticJointDef_Create","number","number number number number number number number number number number number number number number number number number".split(" ")),b2PrismaticJointDef_InitializeAndCreate=Module.cwrap("b2PrismaticJointDef_InitializeAndCreate","number","number number number number number number number number number number number number number number".split(" "));
function b2PrismaticJointDef(){this.bodyB=this.bodyA=null;this.enableMotor=this.enableLimit=this.collideConnected=!1;this.localAnchorA=new b2Vec2;this.localAnchorB=new b2Vec2;this.localAxisA=new b2Vec2(1,0);this.upperTranslation=this.referenceAngle=this.motorSpeed=this.maxMotorForce=this.lowerTranslation=0}
b2PrismaticJointDef.prototype.Create=function(a){var b=new b2PrismaticJoint(this);b.ptr=b2PrismaticJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.enableLimit,this.enableMotor,this.localAnchorA.x,this.localAnchorA.y,this.localAnchorB.x,this.localAnchorB.y,this.localAxisA.x,this.localAxisA.y,this.lowerTranslation,this.maxMotorForce,this.motorSpeed,this.referenceAngle,this.upperTranslation);return b};
b2PrismaticJointDef.prototype.InitializeAndCreate=function(a,b,c,d){this.bodyA=a;this.bodyB=b;a=new b2PrismaticJoint(this);a.ptr=b2PrismaticJointDef_InitializeAndCreate(world.ptr,this.bodyA.ptr,this.bodyB.ptr,c.x,c.y,d.x,d.y,this.collideConnected,this.enableLimit,this.enableMotor,this.lowerTranslation,this.maxMotorForce,this.motorSpeed,this.upperTranslation);b2World._Push(a,world.joints);return a};function b2RopeJoint(a){this.ptr=this.next=null}var b2RopeJointDef_Create=Module.cwrap("b2RopeJointDef_Create","number","number number number number number number number number number".split(" "));function b2RopeJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!1;this.localAnchorA=new b2Vec2;this.localAnchorB=new b2Vec2;this.maxLength=0}
b2RopeJointDef.prototype.Create=function(a){var b=new b2RopeJoint(this);b.ptr=b2RopeJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.localAnchorA.x,this.localAnchorA.y,this.localAnchorB.x,this.localAnchorB.y,this.maxLength);return b};var b2MouseJoint_SetTarget=Module.cwrap("b2MouseJoint_SetTarget","null",["number","number","number"]);function b2MouseJoint(a){this.next=this.ptr=null}b2MouseJoint.prototype.SetTarget=function(a){b2MouseJoint_SetTarget(this.ptr,a.x,a.y)};var b2MouseJointDef_Create=Module.cwrap("b2MouseJointDef_Create","number","number number number number number number number number number".split(" "));
function b2MouseJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!1;this.dampingRatio=.7;this.frequencyHz=5;this.maxForce=0;this.target=new b2Vec2}b2MouseJointDef.prototype.Create=function(a){var b=new b2MouseJoint(this);b.ptr=b2MouseJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.dampingRatio,this.frequencyHz,this.maxForce,this.target.x,this.target.y);return b};var b2XformWeldJointDef_Create=Module.cwrap("b2XformWeldJointDef_Create","number","number number number number number number number number number number number number number number number number number number number number number".split(" "));
function b2XformWeldJointDef(){this.bodyB=this.bodyA=null;this.collideConnected=!1;this.frequencyHz=this.dampingRatio=0;this.localAnchorA=new b2Vec2;this.localAnchorB=new b2Vec2;this.referenceAngle=0;this.transformB=b2Mat33.Identity();this.transformBRot=new b2Vec2(1,0)}
b2XformWeldJointDef.prototype.Create=function(a){var b=new b2XformWeldJoint(this);b.ptr=b2XformWeldJointDef_Create(a.ptr,this.bodyA.ptr,this.bodyB.ptr,this.collideConnected,this.dampingRatio,this.frequencyHz,this.localAnchorA.x,this.localAnchorA.y,this.localAnchorB.x,this.localAnchorB.y,this.referenceAngle,this.transformB.a,this.transformB.b,this.transformB.c,this.transformB.d,this.transformB.e,this.transformB.f,this.transformB.g,this.transformB.h,this.transformB.i,this.transformBRot.x,this.transformBRot.y);
b.buffer=new DataView(Module.HEAPU8.buffer,b.ptr);return b};var b2XformWeldJoint_transformB_offset=Offsets.b2XformWeldJoint.transformB;function b2XformWeldJoint(a){this.bodyA=a.bodyA;this.bodyB=a.bodyB;this.buffer=this.ptr=this.next=null}
b2XformWeldJoint.prototype.GetTransformB=function(){var a=new b2Mat33;a.a=this.buffer.getFloat32(b2XformWeldJoint_transformB_offset,!0);a.b=this.buffer.getFloat32(b2XformWeldJoint_transformB_offset+4,!0);a.c=this.buffer.getFloat32(b2XformWeldJoint_transformB_offset+8,!0);a.d=this.buffer.getFloat32(b2XformWeldJoint_transformB_offset+12,!0);a.e=this.buffer.getFloat32(b2XformWeldJoint_transformB_offset+16,!0);a.f=this.buffer.getFloat32(b2XformWeldJoint_transformB_offset+20,!0);a.g=this.buffer.getFloat32(b2XformWeldJoint_transformB_offset+
24,!0);a.h=this.buffer.getFloat32(b2XformWeldJoint_transformB_offset+28,!0);a.i=this.buffer.getFloat32(b2XformWeldJoint_transformB_offset+32,!0);return a};var b2Contact_fixtureA_offset=Offsets.b2Contact.fixtureA,b2Contact_fixtureB_offset=Offsets.b2Contact.fixtureB,b2Contact_flags_offset=Offsets.b2Contact.flags,b2Contact_tangentSpeed_offset=Offsets.b2Contact.tangentSpeed,b2Contact_flags_enabledFlag=4,b2Contact_GetManifold=Module.cwrap("b2Contact_GetManifold","number",["number"]),b2Contact_GetWorldManifold=Module.cwrap("b2Contact_GetWorldManifold","number",["number"]);function b2Contact(a){this.buffer=new DataView(Module.HEAPU8.buffer,a);this.ptr=a}
b2Contact.prototype.GetFixtureA=function(){var a=this.buffer.getUint32(b2Contact_fixtureA_offset,!0);return world.fixturesLookup[a]};b2Contact.prototype.GetFixtureB=function(){var a=this.buffer.getUint32(b2Contact_fixtureB_offset,!0);return world.fixturesLookup[a]};b2Contact.prototype.GetManifold=function(){return new b2Manifold(b2Contact_GetManifold(this.ptr))};b2Contact.prototype.GetWorldManifold=function(){return new b2WorldManifold(b2Contact_GetWorldManifold(this.ptr))};
b2Contact.prototype.SetEnabled=function(a){var b=this.buffer.getUint32(b2Contact_flags_offset,!0),b=a?b|b2Contact_flags_enabledFlag:b&~b2Contact_flags_enabledFlag;this.buffer.setUint32(b2Contact_flags_offset,b,!0)};b2Contact.prototype.SetTangentSpeed=function(a){this.buffer.setFloat32(b2Contact_tangentSpeed_offset,a,!0)};function b2Filter(){this.categoryBits=1;this.maskBits=65535;this.groupIndex=0}var b2Fixture_isSensor_offset=Offsets.b2Fixture.isSensor,b2Fixture_friction_offset=Offsets.b2Fixture.friction,b2Fixture_userData_offset=Offsets.b2Fixture.userData,b2Fixture_filter_categoryBits_offset=Offsets.b2Fixture.filterCategoryBits,b2Fixture_filter_maskBits_offset=Offsets.b2Fixture.filterMaskBits,b2Fixture_filter_groupIndex_offset=Offsets.b2Fixture.filterGroupIndex;
function b2Fixture(){this.shape=this.ptr=this.buffer=this.body=null}var b2Fixture_TestPoint=Module.cwrap("b2Fixture_TestPoint","number",["number","number","number"]),b2Fixture_Refilter=Module.cwrap("b2Fixture_Refilter","null",["number"]);b2Fixture.prototype._SetPtr=function(a){this.ptr=a;this.buffer=new DataView(Module.HEAPU8.buffer,a)};
b2Fixture.prototype.FromFixtureDef=function(a){this.density=a.density;this.friction=a.friction;this.isSensor=a.isSensor;this.restitution=a.restitution;this.shape=a.shape;this.userData=a.userData;this.vertices=[]};b2Fixture.prototype.GetUserData=function(){return this.buffer.getUint32(b2Fixture_userData_offset,!0)};
b2Fixture.prototype.SetFilterData=function(a){this.buffer.setUint16(b2Fixture_filter_categoryBits_offset,a.categoryBits,!0);this.buffer.setUint16(b2Fixture_filter_maskBits_offset,a.maskBits,!0);this.buffer.setUint16(b2Fixture_filter_groupIndex_offset,a.groupIndex,!0);this.Refilter()};b2Fixture.prototype.SetFriction=function(a){this.buffer.setFloat32(b2Fixture_friction_offset,a,!0);this.friction=a};
b2Fixture.prototype.SetSensor=function(a){this.buffer.setUint32(b2Fixture_isSensor_offset,a,!0);this.isSensor=!!a};b2Fixture.prototype.Refilter=function(){b2Fixture_Refilter(this.ptr)};b2Fixture.prototype.TestPoint=function(a){return b2Fixture_TestPoint(this.ptr,a.x,a.y)};function b2FixtureDef(){this.density=0;this.friction=.2;this.isSensor=!1;this.restitution=0;this.userData=this.shape=null;this.filter=new b2Filter};function b2ContactImpulse(a){this.ptr=a;this.buffer=new DataView(Module.HEAPU8.buffer,a)}b2ContactImpulse.prototype.GetNormalImpulse=function(a){return this.buffer.getFloat32(4*a,!0)};b2ContactImpulse.prototype.GetTangentImpulse=function(a){return this.buffer.getFloat32(4*a+8,!0)};b2ContactImpulse.prototype.GetCount=function(a){console.log(this.buffer.getInt32(16,!0))};function b2ParticleSystemDef(){this.colorMixingStrength=.5;this.dampingStrength=1;this.destroyByAge=!0;this.ejectionStrength=.5;this.elasticStrength=.25;this.lifetimeGranularity=1/60;this.powderStrength=.5;this.pressureStrength=.05;this.repulsiveStrength=this.radius=1;this.springStrength=.25;this.staticPressureIterations=8;this.surfaceTensionPressureStrength=this.surfaceTensionNormalStrength=this.staticPressureStrength=this.staticPressureRelaxation=.2;this.viscousStrength=.25}
var b2ParticleSystem_CreateParticle=Module.cwrap("b2ParticleSystem_CreateParticle","number","number number number number number number number number number number number number number".split(" ")),b2ParticleSystem_GetColorBuffer=Module.cwrap("b2ParticleSystem_GetColorBuffer","number",["number"]),b2ParticleSystem_GetParticleCount=Module.cwrap("b2ParticleSystem_GetParticleCount","number",["number"]),b2ParticleSystem_GetParticleLifetime=Module.cwrap("b2ParticleSystem_GetParticleLifetime","number",["number",
"number"]),b2ParticleSystem_GetPositionBuffer=Module.cwrap("b2ParticleSystem_GetPositionBuffer","number",["number"]),b2ParticleSystem_GetVelocityBuffer=Module.cwrap("b2ParticleSystem_GetVelocityBuffer","number",["number"]),b2ParticleSystem_SetDamping=Module.cwrap("b2ParticleSystem_SetDamping","null",["number","number"]),b2ParticleSystem_SetDensity=Module.cwrap("b2ParticleSystem_SetDensity","null",["number","number"]),b2ParticleSystem_SetGravityScale=Module.cwrap("b2ParticleSystem_SetGravityScale",
"null",["number","number"]),b2ParticleSystem_SetMaxParticleCount=Module.cwrap("b2ParticleSystem_SetMaxParticleCount","null",["number","number"]),b2ParticleSystem_SetParticleLifetime=Module.cwrap("b2ParticleSystem_SetParticleLifetime","null",["number","number","number"]),b2ParticleSystem_SetRadius=Module.cwrap("b2ParticleSystem_SetRadius","null",["number","number"]);function b2ParticleSystem(a){this.density=this.dampingStrength=1;this.ptr=a;this.particleGroups=[];this.gravityScale=this.radius=1}
b2ParticleSystem.prototype.CreateParticle=function(a){return b2ParticleSystem_CreateParticle(this.ptr,a.color.r,a.color.g,a.color.b,a.color.a,a.flags,a.group,a.lifetime,a.position.x,a.position.y,a.userData,a.velocity.x,a.velocity.y)};b2ParticleSystem.prototype.CreateParticleGroup=function(a){a=new b2ParticleGroup(a.shape._CreateParticleGroup(this,a));this.particleGroups.push(a);return a};b2ParticleSystem.prototype.DestroyParticlesInShape=function(a,b){return a._DestroyParticlesInShape(this,b)};
b2ParticleSystem.prototype.GetColorBuffer=function(){var a=4*b2ParticleSystem_GetParticleCount(this.ptr),b=b2ParticleSystem_GetColorBuffer(this.ptr);return new Uint8Array(Module.HEAPU8.buffer,b,a)};b2ParticleSystem.prototype.GetParticleLifetime=function(a){return b2ParticleSystem_GetParticleLifetime(this.ptr,a)};b2ParticleSystem.prototype.GetParticleCount=function(){return b2ParticleSystem_GetParticleCount(this.ptr)};
b2ParticleSystem.prototype.GetPositionBuffer=function(){var a=2*b2ParticleSystem_GetParticleCount(this.ptr),b=b2ParticleSystem_GetPositionBuffer(this.ptr);return new Float32Array(Module.HEAPU8.buffer,b,a)};b2ParticleSystem.prototype.GetVelocityBuffer=function(){var a=2*b2ParticleSystem_GetParticleCount(this.ptr),b=b2ParticleSystem_GetVelocityBuffer(this.ptr);return new Float32Array(Module.HEAPU8.buffer,b,a)};
b2ParticleSystem.prototype.SetDamping=function(a){this.dampingStrength=a;b2ParticleSystem_SetDamping(this.ptr,a)};b2ParticleSystem.prototype.SetDensity=function(a){this.density=a;b2ParticleSystem_SetDensity(this.ptr,a)};b2ParticleSystem.prototype.SetGravityScale=function(a){this.gravityScale=a;b2ParticleSystem_SetGravityScale(this.ptr,a)};b2ParticleSystem.prototype.SetMaxParticleCount=function(a){b2ParticleSystem_SetMaxParticleCount(this.ptr,a)};
b2ParticleSystem.prototype.SetParticleLifetime=function(a,b){b2ParticleSystem_SetParticleLifetime(this.ptr,a,b)};b2ParticleSystem.prototype.SetRadius=function(a){this.radius=a;b2ParticleSystem_SetRadius(this.ptr,a)};var b2_solidParticleGroup=1,b2_rigidParticleGroup=2,b2_particleGroupCanBeEmpty=4,b2_particleGroupWillBeDestroyed=8,b2_particleGroupNeedsUpdateDepth=16,b2_particleGroupInternalMask=b2_particleGroupWillBeDestroyed|b2_particleGroupNeedsUpdateDepth,b2ParticleGroup_ApplyForce=Module.cwrap("b2ParticleGroup_ApplyForce","null",["number","number","number"]),b2ParticleGroup_ApplyLinearImpulse=Module.cwrap("b2ParticleGroup_ApplyLinearImpulse","null",["number","number","number"]),b2ParticleGroup_DestroyParticles=
Module.cwrap("b2ParticleGroup_DestroyParticles","null",["number","number"]),b2ParticleGroup_GetBufferIndex=Module.cwrap("b2ParticleGroup_GetBufferIndex","number",["number"]),b2ParticleGroup_GetParticleCount=Module.cwrap("b2ParticleGroup_GetParticleCount","number",["number"]),b2ParticleGroup_groupFlags_offset=Offsets.b2ParticleGroup.groupFlags;function b2ParticleGroup(a){this.buffer=new DataView(Module.HEAPU8.buffer,a);this.ptr=a}
b2ParticleGroup.prototype.ApplyForce=function(a){b2ParticleGroup_ApplyForce(this.ptr,a.x,a.y)};b2ParticleGroup.prototype.ApplyLinearImpulse=function(a){b2ParticleGroup_ApplyLinearImpulse(this.ptr,a.x,a.y)};b2ParticleGroup.prototype.DestroyParticles=function(a){b2ParticleGroup_DestroyParticles(this.ptr,a)};b2ParticleGroup.prototype.GetBufferIndex=function(){return b2ParticleGroup_GetBufferIndex(this.ptr)};
b2ParticleGroup.prototype.GetGroupFlags=function(){return this.buffer.getUint32(b2ParticleGroup_groupFlags_offset,!0)};b2ParticleGroup.prototype.GetParticleCount=function(){return b2ParticleGroup_GetParticleCount(this.ptr)};b2ParticleGroup.prototype.SetGroupFlags=function(a){this.buffer.setUint32(b2ParticleGroup_groupFlags_offset,a,!0)};
function b2ParticleGroupDef(){this.angularVelocity=this.angle=0;this.color=new b2ParticleColor(0,0,0,0);this.flags=0;this.group=new b2ParticleGroup(null);this.lifetime=this.groupFlags=0;this.linearVelocity=new b2Vec2;this.position=new b2Vec2;this.positionData=null;this.particleCount=0;this.shape=null;this.strength=1;this.stride=0;this.userData=null};var b2_waterParticle=0,b2_zombieParticle=2,b2_wallParticle=4,b2_springParticle=8,b2_elasticParticle=16,b2_viscousParticle=32,b2_powderParticle=64,b2_tensileParticle=128,b2_colorMixingParticle=256,b2_destructionListenerParticle=512,b2_barrierParticle=1024,b2_staticPressureParticle=2048,b2_reactiveParticle=4096,b2_repulsiveParticle=8192,b2_fixtureContactListenerParticle=16384,b2_particleContactListenerParticle=32768,b2_fixtureContactFilterParticle=65536,b2_particleContactFilterParticle=131072;
function b2ParticleColor(a,b,c,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d=0);this.r=a;this.g=b;this.b=c;this.a=d}b2ParticleColor.prototype.Set=function(a,b,c,d){this.r=a;this.g=b;this.b=c;this.a=d};function b2ParticleDef(){this.color=new b2Vec2;this.lifetime=this.group=this.flags=0;this.position=new b2Vec2;this.userData=0;this.velocity=new b2Vec2};
